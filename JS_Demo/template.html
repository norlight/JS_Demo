<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
	    <meta charset="utf-8">
        <meta name="generator" content="HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.15), see www.w3.org" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no" />
        <style type="text/css">
/*<![CDATA[*/
        html {
        -webkit-tap-highlight-color:rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color:transparent;
        }
        h1,h2,h3,h4,h5,h6 {
        margin: .7em 0;
        line-height: 1.5;
        -webkit-font-smoothing: antialiased;
        }
        h1 { font-size: 24px }
        h2 { font-size: 22px }
        h3 { font-size: 20px }
        h4 { font-size: 18px }
        h5,
        h6 { font-size: 17px }
        img { max-width:100% }
        hr {
        border: none;
        border-bottom: 1px solid #d5d5d5;
        margin-bottom: 25px;
        }
        
        /* 额外添加，来自PC页面 */
        span {
	    position: relative;
	    top: 1px;
	    margin-right: 10px;
	    font-size: 12px;
	    color: #999;
		}
		
	        
        
        /* 引用的样式 */
        blockquote {
        margin: 0 0 25px 0;
        padding: 20px;
        font-weight: 100;
        word-break: break-all;
        border-left: 4px solid #999;
        background-color: #f6f6f6;
        }
        blockquote p:last-child { margin-bottom: 0 }
        /* 列表的样式 */
        ol,ul { margin-bottom: 25px }
        ol li,
        ul li { line-height: 1.7em }
        ol li ol,
        ul li ul { margin-top: 15px }
        /*代码块和inline代码的样式*/
        pre {
        padding: 10px 10px 8px;
        margin-bottom: 25px;
        overflow: auto;
        word-wrap: normal;
        word-break: break-all;
        white-space: pre;
        border: 1px solid rgba(0,0,0,0.15);
        -webkit-border-radius: 4px;
        border-radius: 4px;
        font-size: 12px;
        line-height: 18px;
        }
        pre code {
        padding: 0;
        background-color: transparent;
        font-size: 12px;
        white-space: pre;
        }
        code {
        padding: 2px 4px;
        background-color: #fdf6e3;
        border: none;
        white-space: pre-wrap;
        color: #657b83;
        font-size: inherit;
        }
        /* 表单的样式 */
        table {
        margin-bottom: 25px;
        border: 1px solid #d9d9d9;
        border-collapse: collapse;
        border-left: none;
        }
        table thead th { vertical-align: bottom }
        table th { font-weight: bold }
        table th,
        table td {
        padding: 8px;
        border-left: 1px solid #d9d9d9;
        border-top: 1px solid #d9d9d9;
        line-height: 1.5em;
        vertical-align: top;
        }
        /* 文章图片和注释样式 */
        .image-package {
        margin: 0 auto 25px;
        line-height: 1;
        text-align: center;
        }
        .image-package .image-caption {
        display: inline-block;
        min-width: 20%;
        min-height: 20px;
        border-bottom: 1px solid #d9d9d9;
        margin: 0 auto;
        padding: 10px;
        font-size: 14px;
        color: #999;
        font-style: italic;
        line-height: 150%;
        }
        .image-package .image-caption:empty { display: none }
        
        
        /* 内容部分*/
        .content {
        font-size: 17px;
        line-height: 1.5;
        color: #2f2f2f;
        word-break: break-all;
        }
        a {
        color: #28a1c5;
        text-decoration: none;
        }
        .content p {
        margin: 0 0 20px 0;
        word-break: break-word;
        white-space: pre-wrap;
        }
        
        /*额外添加，来自PC页面*/
		.author-info{
		padding-bottom:15px;
		margin-bottom:30px;
		border-bottom:1px solid #eeeeee;
		overflow:hidden;
		font-size:12px;
		color:#999999
		}
	
		.author-info .follow,.author-info .following{
		float:right;
		margin-top:10px
		}
	
		.author-info .follow>span,.author-info .following>span{
		display:inline-block;
		line-height:13px
		}
	
		.author-info .avatar{
		float:left;
		width:40px;
		height:40px;
		margin-right:10px
		}
		.author-info .avatar img {
	    width: 100%;
	    height: 100%;
	    border: 2px solid #FFF;
	    border-radius: 50%;
	    box-sizing: border-box;
		}
	
		.author-info .label{
		background:none;
		border:1px solid #e78170;
		color:#e78170;
		text-shadow:none;
		font-size:11px;
		font-weight:normal;
		line-height:1
		border-radius: 3px;
		    border-top-left-radius: 3px;
		    border-top-right-radius: 3px;
		    border-bottom-right-radius: 3px;
		    border-bottom-left-radius: 3px;

		}
	
		.author-info .author-name{
		margin:0 5px
		text-decoration: none;
	    -moz-text-decoration-color: -moz-use-text-color;
	    -moz-text-decoration-line: none;
	    -moz-text-decoration-style: solid;
	    -moz-user-select: text;
    
		}
	
		.author-info>div{
		margin-top:3px
		}

        .title {
	    word-break: break-all;
	    font-size: 32px;
	    font-weight: bold;
	    line-height: 1.5;
		}

        /* Style For Code-Block Highlight */
        pre,
        .hljs {
        background: #fdf6e3;
        color: #657b83;
        -webkit-text-size-adjust: none;
        }
        .hljs-comment,
        .diff .hljs-header,
        .hljs-doctype,
        .hljs-pi,
        .lisp .hljs-string { color: #93a1a1 }
        /* Solarized Green */
        .hljs-keyword,
        .hljs-winutils,
        .method,
        .hljs-addition,
        .css .hljs-tag,
        .hljs-request,
        .hljs-status,
        .nginx .hljs-title { color: #859900 }
        /* Solarized Cyan */
        .hljs-number,
        .hljs-command,
        .hljs-string,
        .hljs-tag .hljs-value,
        .hljs-rule .hljs-value,
        .hljs-doctag,
        .tex .hljs-formula,
        .hljs-regexp,
        .hljs-hexcolor,
        .hljs-link_url { color: #2aa198 }
        /* Solarized Blue */
        .hljs-title,
        .hljs-localvars,
        .hljs-chunk,
        .hljs-decorator,
        .hljs-built_in,
        .hljs-identifier,
        .vhdl .hljs-literal,
        .hljs-id,
        .css .hljs-function,
        .hljs-name { color: #268bd2 }
        /* Solarized Yellow */
        .hljs-attribute,
        .hljs-variable,
        .lisp .hljs-body,
        .smalltalk .hljs-number,
        .hljs-constant,
        .hljs-class .hljs-title,
        .hljs-parent,
        .hljs-type,
        .hljs-link_reference { color: #b58900 }
        /* Solarized Orange */
        .hljs-preprocessor,
        .hljs-preprocessor .hljs-keyword,
        .hljs-pragma,
        .hljs-shebang,
        .hljs-symbol,
        .hljs-symbol .hljs-string,
        .diff .hljs-change,
        .hljs-special,
        .hljs-attr_selector,
        .hljs-subst,
        .hljs-cdata,
        .css .hljs-pseudo,
        .hljs-header { color: #cb4b16 }
        /* Solarized Red */
        .hljs-deletion,
        .hljs-important { color: #dc322f }
        /* Solarized Violet */
        .hljs-link_label { color: #6c71c4 }
        .tex .hljs-formula { background: #eee8d5 }

        /* 视频部分 */
        .video-package {
        position: relative;
        width: 100%;
        margin: 0 auto 25px;
        line-height: 1;
        text-align: center;
        }
        .video-package div.video-player {
        margin: 0px;
        padding: 0px;
        background-color: black;
        overflow: hidden;
        }
        .video-package div.video-placeholder {
        position: relative;
        display: inline-block;
        box-sizing: border-box;
        background: black;
        border: 1px solid black;
        cursor: pointer;
        }
        .video-package div.video-placeholder:before {
        content: '努力加载视频中，请稍候！';
        position: absolute;
        top: 50%;
        left: 0px;
        display: block;
        box-sizing: border-box;
        width: 100%;
        padding-top: 40px;
        padding-left: 10px;
        color: white;
        font-size: 24px;
        }
        .video-package .video-placeholder-area {
        position: relative;
        display: inline-block;
        min-height: 110px;
        padding: 10px;
        padding-left: 110px;
        box-sizing: border-box;
        border: 1px solid #d5d5d5;
        text-align: left;
        cursor: pointer;
        }
        .video-package .video-placeholder-area:after {
        content: ' ';
        position: absolute;
        top: 9px;
        left: 9px;
        display: block;
        width: 90px;
        height: 90px;
        background-color: rgba(0, 0, 0, 0.3);
        background-image: url(http://cdn0.jianshu.io/assets/play-btn-93f954fcf7a4824ec07f8c15ab77eef5.png);
        background-position: 20px;
        background-size: 50px;
        background-repeat: no-repeat;
        transition: all linear 100ms;
        }
        .video-package .video-placeholder-area .video-cover {
        position: absolute;
        top: 9px;
        left: 9px;
        display: block;
        width: 90px;
        height: 90px;
        opacity: 0.8;
        transition: opacity linear 100ms;
        }
        .video-package .video-close-button,
        .video-package .video-provider-button {
        float: left;
        font-size: 14px;
        padding: 0px;
        margin-top: 10px;
        line-height: 14px;
        cursor: pointer;
        transition: opacity linear 100ms;
        }
        .video-package .video-provider-button {
        float: right;
        }
        .video-package i.fa {
        position: relative;
        top: 2px;
        display: inline-block;
        width: 14px;
        height: 14px;
        background-size: 14px;
        }
        .video-package i.fa.fa-eject {
        background-image: url(http://cdn0.jianshu.io/assets/eject-d-c88831ef194cd62b1ab71bb32fbe0b95.png);
        }
        .reader-night-mode .video-package i.fa.fa-eject {
        background-image: url(http://cdn0.jianshu.io/assets/eject-n-c71dfbfe7c01b77c8e05a16dce614d1e.png);
        }
        .video-package i.fa.fa-external-link {
        background-image: url(http://cdn0.jianshu.io/assets/extlink-d-eaadc7a81312daed46c3a7443b1ec439.png);
        }
        .reader-night-mode .video-package i.fa.fa-external-link {
        background-image: url(http://cdn0.jianshu.io/assets/extlink-n-54100e4770190cf27d7bf6c32cdb4db4.png);
        }
        @media (max-width: 400px) {
        .video-package div.video-placeholder:before {
        font-size: 20px;
        }
        }
        .video-package div.video-placeholder:after {
        content: ' ';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 90px;
        height: 90px;
        margin-top: -65px;
        margin-left: -45px;
        background-image: url(http://cdn0.jianshu.io/assets/play-btn-93f954fcf7a4824ec07f8c15ab77eef5.png);
        background-size: 90px 90px;
        }
        .video-package .video-description {
        /*display: inline-block;*/
        display: none;
        min-width: 20%;
        min-height: 20px;
        border-bottom: 1px solid #d9d9d9;
        margin: 0 auto;
        padding: 10px;
        font-size: 14px;
        color: #999;
        font-style: italic;
        line-height: 150%;
        }
        .video-package .video-description:empty { display: none; }
        .video-package iframe.player {
        width: 100%;
        box-sizing: border-box;
        }

        /*黑夜模式*/
        .reader-night-mode { background-color: #3f3f3f }
        .reader-night-mode .content,
        .reader-night-mode .content table { color: #b1b1b1 }
        .reader-night-mode hr,
        .reader-night-mode img,
        .reader-night-mode table,
        .reader-night-mode table th,
        .reader-night-mode table td,
        .reader-night-mode blockquote { border-color: #2f2f2f }
        .reader-night-mode .image-package .image-caption,
        .reader-night-mode .video-package .video-description,
        .reader-night-mode .video-package .video-placeholder-area { border-color: #262626 }
        .reader-night-mode table td,
        .reader-night-mode table th,
        .reader-night-mode blockquote { background-color: #555 }
        .reader-night-mode pre,
        .reader-night-mode code,
        .reader-night-mode .hljs {
        background-color: #002b36;
        color: #839496;
        }
        .reader-night-mode .hljs-comment,
        .reader-night-mode .diff .hljs-header,
        .reader-night-mode .hljs-doctype,
        .reader-night-mode .hljs-pi,
        .reader-night-mode .lisp .hljs-string { color: #586e75 }
        .reader-night-mode .tex .hljs-formula { background: #073642 }

        /*-----设置字体大小-----*/
        /*小号字体*/
        .small-size h1 { font-size: 22px }
        .small-size h2 { font-size: 20px }
        .small-size h3 { font-size: 18px }
        .small-size h4 { font-size: 16px }
        .small-size h5,
        .small-size h6 { font-size: 15px }
        .small-size hr { margin-bottom: 23px }
        .small-size blockquote {
        margin-bottom: 20px;
        padding: 18px;
        border-left-width: 3px;
        }
        .small-size blockquote p:last-child { margin-bottom: 0 }
        .small-size ol,
        .small-size ul {
        padding-left: 36px;
        margin-bottom: 20px;
        }
        .small-size ol li ol,
        .small-size ul li ul { margin-top: 12px }
        .small-size pre { margin-bottom: 22px }
        .small-size table { margin-bottom: 22px }
        .small-size table th,
        .small-size table td {
        padding: 7px;
        line-height: 23px;
        }
        .small-size .image-package,
        .small-size .video-package { margin-bottom: 22px }
        .small-size .content { font-size: 15px }
        .small-size .content p { margin-bottom: 18px }
        /*大号字体*/
        .big-size h1 { font-size: 27px }
        .big-size h2 { font-size: 25px }
        .big-size h3 { font-size: 23px }
        .big-size h4 { font-size: 21px }
        .big-size h5,
        .big-size h6 { font-size: 19px }
        .big-size hr { margin-bottom: 27px }
        .big-size blockquote {
        margin-bottom: 30px;
        padding: 22px;
        }
        .big-size blockquote p:last-child { margin-bottom: 0 }
        .big-size ol,
        .big-size ul {
        padding-left: 44px;
        margin-bottom: 28px;
        }
        .big-size ol li ol,
        .big-size ul li ul { margin-top: 16px }
        .big-size pre { margin-bottom: 28px }
        .big-size code { font-size: 14px }
        .big-size table { margin-bottom: 25px }
        .big-size table th,
        .big-size table td {
        padding: 10px;
        font-size: 19px;
        }
        .big-size .content { font-size: 19px }
        .big-size .content p { margin-bottom: 22px }
        /*特大号字体*/
        .large-size h1 { font-size: 27px }
        .large-size h2 { font-size: 26px }
        .large-size h3 { font-size: 25px }
        .large-size h4 { font-size: 24px }
        .large-size h5 { font-size: 23px }
        .large-size h6 { font-size: 22px }
        .large-size hr { margin-bottom: 30px }
        .large-size blockquote {
        margin-bottom: 30px;
        padding: 22px;
        }
        .large-size blockquote p:last-child { margin-bottom: 0 }
        .large-size ol,
        .large-size ul {
        padding-left: 44px;
        margin-bottom: 28px;
        }
        .large-size ol li ol,
        .large-size ul li ul { margin-top: 16px }
        .large-size pre { margin-bottom: 30px }
        .large-size code { font-size: 18px }
        .large-size table { margin-bottom: 25px }
        .large-size table th,
        .large-size table td {
        padding: 10px;
        font-size: 22px;
        }
        .large-size .content { font-size: 22px }
        .large-size .content p { margin-bottom: 24px }
        /*]]>*/
        </style>
        <style type="text/css">
/*<![CDATA[*/
        /* 内容预加载loading样式*/
        .content .img-center::after {
        content: ".";
        height: 100%;
        display: inline-block;
        vertical-align: middle;
        font-size: 0;
        }
        .content .img-center img {
        vertical-align: middle;
        border: none;
        }
        /*]]>*/
        </style>
        <title></title>
    </head>
    <body class="reader-day-mode normal-size">
        
        
        {{{content}}}
        
        
        <script src="http://static0.jianshu.io/mobile-app-page-v1.js" type="text/javascript">
</script><script type="text/javascript">
//<![CDATA[
        function setFontsizeSmall() {
        $('body').removeClass('big-size').removeClass('large-size').addClass('small-size');
        }
        function setFontsizeNormal() {
        $('body').removeClass('big-size').removeClass('large-size').removeClass('small-size');
        }
        function resetFontsize() {
        $('body').removeClass('big-size').removeClass('large-size').removeClass('small-size');
        }
        function setFontsizeBig() {
        $('body').removeClass('small-size').removeClass('large-size').addClass('big-size');
        }
        function setFontsizeLarge() {
        $('body').removeClass('small-size').removeClass('big-size').addClass('large-size');
        }
        function setDayMode() {
        $('body').removeClass('reader-night-mode').addClass('reader-day-mode');
        }
        function setNightMode() {
        $('body').removeClass('reader-day-mode').addClass('reader-night-mode');
        }
        var Maleskine = {};
        function setImageSrc(src, path) {
        var $el = $(Maleskine.allImages[src.split('?')[0]]);
        if( $el.length > 0) {
        $el.attr('src', path);
        }
        }
        function markRead(){
        if (window.WebViewJavascriptBridge) {
        window.WebViewJavascriptBridge.callHandler("Handler.MarkNote", "");
        } else {
        document.addEventListener('WebViewJavascriptBridgeReady', function() {
          window.WebViewJavascriptBridge.callHandler("Handler.MarkNote", "");
        }, false);
        }
        }
        function reachedBottom() {
        return window.innerHeight + window.scrollY + 50 >= document.body.offsetHeight;
        }
        document.addEventListener("DOMContentLoaded", function(event) {
        Maleskine.allImages = {};
        Maleskine.allImageKeys = [];
        Maleskine.allOriginImageKeys = [];

        // Extract all images
        var maleskineImageElements = $('.image-package img');
        for (var i = 0, n = maleskineImageElements.length; i < n; i++) {
        var $el = $(maleskineImageElements[i]);
        Maleskine.allOriginImageKeys.push($el.data('original-src'));
        Maleskine.allImageKeys.push($el.attr('src'));
        Maleskine.allImages[$el.attr('src').split('?')[0]] = $el[0];
        }
        // console.log(" Found " + $('.image-package img').length + " images.");
        $('.image-package img').on('click', function(e){
        console.log(" Image clicked");
        var src = $(e.target).attr('src');
        window.imageListener.previewImage(src, Maleskine.allImageKeys, Maleskine.allOriginImageKeys);
        // window.imageListener.previewImage(Maleskine.allImageKeys.indexOf(src), Maleskine.allImageKeys, Maleskine.allOriginImageKeys);
        });

        // For Video
        var MAX_VIDEO_COUNT = 10;
        var video_maker = function (url, width, height, provider, flash) {
        if (provider === 'bilibili') {
          player = '<div class="video-player player">';
          player += '<video width="' + width + '" height="' + height + '" preload="meta" controls="true">';
          player += '<source src="' + url + '" type="video/mp4">';
          player += '<object type="application/x-shockwave-flash" data="http://static.hdslb.com/play.swf" class="flash" style="width:' + width + 'px; height:' + height + 'px;">';
          player += '<param name="bgcolor" value="#ffffff">';
          player += '<param name="allowfullscreeninteractive" value="true">';
          player += '<param name="allowfullscreen" value="true">';
          player += '<param name="quality" value="high">';
          player += '<param name="allowscriptaccess" value="always">';
          player += '<param name="wmode" value="direct">';
          player += '<param name="flashvars" value="' + flash + '">';
          player += '<\/object>';
          player += '<\/video>';
          player += '<\/div>';
        }
        else {
          player = '<iframe class="player" src="' + url + '" height="' + height + '" width="' + width + '" frameborder=0 allowfullscreen style="width:' + width + 'px; height:' + height + 'px;"><\/iframe>';
        }
        if (!player) player = '<div class="video-placeholder"><\/div>';
        return player;
        };
        var doesVideoURLAvailable = function (url) {
        // if (url.indexOf('../../') === 0) return true;
        check = /^https?:\/\/(?:[\w\.]*?\.(?:youku|tudou|qq|bilibili)\.com|[\w\.\-]*?\.acgvideo\.com)\//i;
        return !!(url.match(check));
        };
        var getVideoCoverImage = function (uuid, dimension) {
        var result = '';
        if (dimension) {
          result = "http://upload.jianshu.io/videos/cover_imgs/" + uuid + "?imageView2/1/w/" + dimension + "/h/" + dimension;
        }
        else {
          result = "http://upload.jianshu.io/videos/cover_imgs/" + uuid;
        }
        return result;
        };
        var width = $(window).width() - 16; // 16 is the padding
        if (width > 480) width = 480;
        else width = Math.round(width);
        var height = Math.round(width / 6 * 5); // 5/6 is the ratio
        $('div.video-package').each(function (index, pkg) {
        pkg = $(pkg);
        if (index >= MAX_VIDEO_COUNT) {
          pkg.remove();
          return;
        }
        var url = pkg.attr('data-video-url'), img = pkg.attr('data-preview-url');
        if (!(url && doesVideoURLAvailable(url))) {
          pkg.remove();
          return;
        }
        var provider = pkg.attr('data-provider');
        var flash = pkg.attr('data-flash-url');
        var player = $(video_maker(url, width, height, provider, flash));
        var cover = pkg.attr('data-cover-uuid');
        var caption = pkg.find('.video-description');
        var captionContent = caption.html();
        var placeholder = $('<div class="video-placeholder-area">' + captionContent + '<\/div>');
        placeholder.css({'width': width + 'px'});
        var videoCover = $('<img class="video-cover">');
        videoCover.attr('src', getVideoCoverImage(cover, 90));
        placeholder.append(videoCover);
        caption.html('');
        pkg.find('br').before(placeholder);
        var closeBtn = $('<div class="video-close-button"><i class="fa fa-eject"><\/i> 收起视频<\/div>');
        closeBtn.css({display: 'none'});
        var providerBtn = $('<div class="video-provider-button"><i class="fa fa-external-link"><\/i> 转到视频页<\/div>');
        providerBtn.css({display: 'none'});
        if (provider === 'bilibili') {
          closeBtn.css({'margin-top': '-10px'});
          providerBtn.css({'margin-top': '-10px'});
          origin = flash.split('&').filter(function (info) {
            return info.indexOf('aid') >= 0;
          });
          if (origin.length > 0) {
            origin = origin[0];
            origin = origin.split('=');
            origin = origin[1] || '';
          }
          else {
            origin = '';
          }
          if (origin === '') {
            origin = 'http://www.bilibili.com/';
          }
          else {
            origin = 'http://www.bilibili.com/video/av' + origin + '/';
          }
          providerBtn.on('click', function () {
            window.open(origin);
          });
        }
        pkg.append(closeBtn);
        pkg.append(providerBtn);
        var show = false;
        placeholder.on('click', function () {
          if (show) return
          show = true;
          placeholder.after(player);
          first = false;
          placeholder.hide();
          // caption.html(captionContent);
          pkg.css({'margin-bottom': '50px'});
          closeBtn.css({display: 'block'});
          if (provider === 'bilibili') {
            providerBtn.css({display: 'block'});
          }
        });
        closeBtn.on('click', function () {
          if (!show) return;
          show = false;
          player.remove();
          placeholder.show();
          // caption.html('');
          pkg.css({'margin-bottom': ''});
          closeBtn.css({display: 'none'});
          providerBtn.css({display: 'none'});
        });
        });

        // mark read
        if (reachedBottom()){
        window.setTimeout(markRead, 1000);
        } else {
        window.onscroll = function(event){
          if (reachedBottom()){
            markRead();
            window.onscroll = null;
          }
        }
        }
        });
        //]]>
        </script>
    </body>
</html>

